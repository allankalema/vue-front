import{l as u,g as p}from"./authService-Aa4usrHm.js";import{_ as h,c as i,b as s,f as c,a as v,t as r,w as g,q as w,G as f,e as m,o as d,d as k,n as l}from"./index-akDiswI6.js";import{_ as C}from"./Nita-logo-CbE_mBG5.js";const L={name:"ProfileLayout",data(){return{isLoggingOut:!1,user:null,showDropdown:!1}},computed:{userName(){return this.user?`${this.user.first_name} ${this.user.last_name}`:"User"},userEmail(){return this.user?.email||"user@example.com"},userInitials(){if(!this.user)return"U";const t=this.user.first_name?.[0]||"",o=this.user.last_name?.[0]||"";return`${t}${o}`.toUpperCase()}},mounted(){this.loadUserData(),document.addEventListener("click",this.handleClickOutside),document.addEventListener("keydown",this.handleEscape)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside),document.removeEventListener("keydown",this.handleEscape)},methods:{loadUserData(){const t=p();t&&t.user?this.user=t.user:this.$router.push("/login")},async handleLogout(){this.isLoggingOut=!0;try{await u(),this.$router.push("/login")}catch(t){console.error("Logout error:",t),this.$router.push("/login")}finally{this.isLoggingOut=!1}},toggleDropdown(t){t.stopPropagation(),this.showDropdown=!this.showDropdown},handleClickOutside(t){this.$refs.dropdownContainer&&!this.$refs.dropdownContainer.contains(t.target)&&(this.showDropdown=!1)},handleEscape(t){t.key==="Escape"&&(this.showDropdown?this.showDropdown=!1:this.goToChat())},goToChat(){this.$router.push("/")},navigateTo(t){this.showDropdown=!1,this.$router.push(t)},isActive(t){return this.$route.path===t}}},y={class:"modal-container"},_={class:"modal-header"},b={class:"header-right"},D={class:"dropdown-container",ref:"dropdownContainer"},T={class:"user-avatar"},x={key:0,class:"dropdown-menu"},M={class:"dropdown-header"},E={class:"dropdown-avatar"},B={class:"dropdown-user-info"},U={class:"dropdown-name"},O={class:"dropdown-email"},A=["disabled"],N={key:0,class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},z={key:1,class:"dropdown-icon animate-spin",fill:"none",viewBox:"0 0 24 24"},H={class:"modal-body"},I={class:"modal-content"};function P(t,o,V,j,a,e){return d(),i("div",{class:"profile-modal-overlay","data-modal":"true",onClick:o[6]||(o[6]=m((...n)=>e.goToChat&&e.goToChat(...n),["self"]))},[o[16]||(o[16]=s("div",{class:"modal-backdrop"},null,-1)),s("div",y,[s("div",_,[o[15]||(o[15]=c('<div class="header-left" data-v-37fa3f21><div class="logo-small" data-v-37fa3f21><img src="'+C+'" alt="NITA-U Logo" class="logo-img" data-v-37fa3f21></div><div class="header-titles" data-v-37fa3f21><span class="brand-text" data-v-37fa3f21>NITA-U AI</span><span class="page-title" data-v-37fa3f21>Profile Settings</span></div></div>',1)),s("div",b,[s("div",D,[s("button",{onClick:o[0]||(o[0]=(...n)=>e.toggleDropdown&&e.toggleDropdown(...n)),class:"avatar-dropdown-btn"},[s("div",T,r(e.userInitials),1)]),v(w,{name:"dropdown"},{default:g(()=>[a.showDropdown?(d(),i("div",x,[s("div",M,[s("div",E,r(e.userInitials),1),s("div",B,[s("p",U,r(e.userName),1),s("p",O,r(e.userEmail),1)])]),o[12]||(o[12]=s("div",{class:"dropdown-divider"},null,-1)),s("button",{onClick:o[1]||(o[1]=n=>e.navigateTo("/")),class:"dropdown-item"},[...o[7]||(o[7]=[s("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1),s("span",null,"Back to Chat",-1)])]),s("button",{onClick:o[2]||(o[2]=n=>e.navigateTo("/update-profile")),class:l(["dropdown-item",{active:e.isActive("/update-profile")}])},[...o[8]||(o[8]=[s("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),s("span",null,"Update Profile",-1)])],2),s("button",{onClick:o[3]||(o[3]=n=>e.navigateTo("/change-password")),class:l(["dropdown-item",{active:e.isActive("/change-password")}])},[...o[9]||(o[9]=[s("svg",{class:"dropdown-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})],-1),s("span",null,"Change Password",-1)])],2),o[13]||(o[13]=s("div",{class:"dropdown-divider"},null,-1)),s("button",{onClick:o[4]||(o[4]=(...n)=>e.handleLogout&&e.handleLogout(...n)),class:"dropdown-item logout-item",disabled:a.isLoggingOut},[a.isLoggingOut?(d(),i("svg",z,[...o[11]||(o[11]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(d(),i("svg",N,[...o[10]||(o[10]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)])])),s("span",null,r(a.isLoggingOut?"Logging out...":"Logout"),1)],8,A)])):k("",!0)]),_:1})],512),s("button",{onClick:o[5]||(o[5]=(...n)=>e.goToChat&&e.goToChat(...n)),class:"close-btn",title:"Close"},[...o[14]||(o[14]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),s("div",H,[s("div",I,[f(t.$slots,"default",{},void 0)])])])])}const F=h(L,[["render",P],["__scopeId","data-v-37fa3f21"]]);export{F as P};
