import{a as s}from"./Nita-logo-CbE_mBG5.js";const l=async(e,t)=>(await s.post("/accounts/login/",{email:e,password:t})).data,g=async e=>(await s.post("/accounts/create/",e)).data,i=async(e,t)=>(await s.put(`/accounts/${e}/update/`,t)).data,d=async(e,t,o)=>(await s.post(`/accounts/${e}/password/`,{old_password:t,new_password:o})).data,p=async e=>(await s.post("/accounts/password-reset/request/",{email:e})).data,m=async(e,t)=>(await s.post("/accounts/password-reset/verify/",{email:e,code:t})).data,u=async(e,t,o)=>(await s.post("/accounts/password-reset/reset/",{email:e,code:t,new_password:o})).data,_=e=>{localStorage.setItem("access_token",e.access),localStorage.setItem("refresh_token",e.refresh);const t={username:e.username,first_name:e.first_name,last_name:e.last_name,email:e.email,category:e.category,organisation:e.organisation,gender:e.gender??e.Gender,date_of_birth:e.date_of_birth,logged_in_at:e.logged_in_at};localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("authenticated","true")},r=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),localStorage.setItem("authenticated","false"),localStorage.removeItem("chats"),localStorage.removeItem("session_id"),localStorage.removeItem("remaining_uploads")},n=()=>localStorage.getItem("authenticated")==="true"&&!!localStorage.getItem("access_token"),f=()=>{if(!n())return null;const e=localStorage.getItem("user");return{access_token:localStorage.getItem("access_token"),refresh_token:localStorage.getItem("refresh_token"),user:e?JSON.parse(e):null}},w=async()=>{const e=localStorage.getItem("refresh_token");try{e&&await s.post("/accounts/logout/",{refresh:e})}catch(t){console.warn("Logout request failed:",t)}finally{r()}};export{l as a,u as b,g as c,d,f as g,n as i,w as l,p as r,_ as s,i as u,m as v};
