import{A as P}from"./AuthLayout-C-mLveiX.js";import{c as C}from"./authService-Aa4usrHm.js";import{_ as M,s as x,w,g as v,o as i,b as e,c as n,d as u,F as q,r as A,n as m,t as d,C as f,e as L,x as p,y as h,D as g,E as y,A as k,a as V}from"./index-CDqjSkk1.js";import"./Nita-logo-CbE_mBG5.js";const N={name:"SignupView",components:{AuthLayout:P},data(){return{currentStep:1,steps:["Personal Info","Additional Details","Security"],form:{first_name:"",last_name:"",email:"",gender:"",date_of_birth:"",category:"",organisation:"",password:"",confirmPassword:""},errors:{},errorMessage:"",isLoading:!1,showSuccess:!1,showPassword:!1,showConfirmPassword:!1}},computed:{maxDate(){const t=new Date;return t.setFullYear(t.getFullYear()-13),t.toISOString().split("T")[0]},passwordHasMinLength(){return this.form.password.length>=8},passwordHasNumber(){return/\d/.test(this.form.password)},isCurrentStepValid(){return this.currentStep===1?this.form.first_name&&this.form.last_name&&this.form.email:this.currentStep===2?this.form.gender&&this.form.date_of_birth:this.currentStep===3?this.form.password&&this.form.confirmPassword:!1}},methods:{clearError(t){this.errors[t]&&(this.errors[t]=""),this.errorMessage&&(this.errorMessage="")},validateStep(){this.errors={};let t=!0;if(this.currentStep===1)this.form.first_name.trim()||(this.errors.first_name="First name is required",t=!1),this.form.last_name.trim()||(this.errors.last_name="Last name is required",t=!1),this.form.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.form.email)||(this.errors.email="Please enter a valid email address",t=!1):(this.errors.email="Email is required",t=!1);else if(this.currentStep===2)if(this.form.gender||(this.errors.gender="Please select your gender",t=!1),!this.form.date_of_birth)this.errors.date_of_birth="Date of birth is required",t=!1;else{const r=new Date(this.form.date_of_birth);new Date().getFullYear()-r.getFullYear()<13&&(this.errors.date_of_birth="You must be at least 13 years old",t=!1)}else this.currentStep===3&&(this.form.password?this.form.password.length<8?(this.errors.password="Password must be at least 8 characters",t=!1):/\d/.test(this.form.password)||(this.errors.password="Password must contain at least one number",t=!1):(this.errors.password="Password is required",t=!1),this.form.confirmPassword?this.form.password!==this.form.confirmPassword&&(this.errors.confirmPassword="Passwords do not match",t=!1):(this.errors.confirmPassword="Please confirm your password",t=!1));return t},handleNext(){this.validateStep()&&(this.currentStep<this.steps.length?this.currentStep++:this.handleSubmit())},handlePrevious(){this.currentStep>1&&this.currentStep--},async handleSubmit(){this.errorMessage="",this.isLoading=!0;try{const t={email:this.form.email.trim().toLowerCase(),first_name:this.form.first_name.trim(),last_name:this.form.last_name.trim(),gender:this.form.gender,date_of_birth:this.form.date_of_birth,category:this.form.category||null,organisation:this.form.organisation.trim()||null,password:this.form.password},r=await C(t);this.showSuccess=!0}catch(t){if(console.error("Signup error:",t),t.response){const r=t.response.status,a=t.response.data;r===400?(a.email&&(this.errors.email=Array.isArray(a.email)?a.email[0]:a.email,this.currentStep=1),a.password&&(this.errors.password=Array.isArray(a.password)?a.password[0]:a.password,this.currentStep=3),a.first_name&&(this.errors.first_name=Array.isArray(a.first_name)?a.first_name[0]:a.first_name,this.currentStep=1),this.errorMessage=a.detail||a.message||"Please check the form for errors"):r>=500?this.errorMessage="Server error. Please try again later.":this.errorMessage=a.detail||a.message||"Signup failed. Please try again."}else t.request?this.errorMessage="Network error. Please check your internet connection.":this.errorMessage="An unexpected error occurred. Please try again."}finally{this.isLoading=!1}},goToLogin(){this.$router.push("/login")}}},B={class:"signup-wizard"},E={class:"progress-steps"},z={class:"step-circle"},D={key:0,class:"checkmark"},I={key:1},j={class:"step-label"},F={class:"form-header"},O={class:"form-subtitle"},U={key:0,class:"error-alert"},Y={class:"error-text"},T={key:1,class:"success-card"},H={class:"success-message"},G={class:"form-step"},W={class:"form-group"},J={key:0,class:"field-error"},K={class:"form-group"},Q={key:0,class:"field-error"},R={class:"form-group"},X={key:0,class:"field-error"},Z={class:"form-step"},$={class:"form-group"},rr=["required"],er={key:0,class:"field-error"},sr={class:"form-group"},or=["max","required"],tr={key:0,class:"field-error"},ir={class:"form-group"},nr={key:0,class:"field-error"},lr={class:"form-group"},ar={key:0,class:"field-error"},dr={class:"form-step"},ur={class:"form-group"},mr={class:"password-wrapper"},pr=["type","required"],fr={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},cr={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},hr={key:0,class:"field-error"},gr={class:"password-requirements"},wr={class:"form-group"},vr={class:"password-wrapper"},yr=["type","required"],kr={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_r={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},br={key:0,class:"field-error"},Sr={class:"form-navigation"},Pr=["disabled"],Cr=["disabled"],Mr={key:0},xr={key:1,class:"btn-loading-content"},qr={key:3,class:"form-footer"},Ar={class:"footer-text"};function Lr(t,r,a,_,s,l){const b=v("router-link"),S=v("AuthLayout");return i(),x(S,null,{default:w(()=>[e("div",B,[e("div",E,[(i(!0),n(q,null,A(s.steps,(o,c)=>(i(),n("div",{key:c,class:m(["step-item",{active:s.currentStep===c+1,completed:s.currentStep>c+1}])},[e("div",z,[s.currentStep>c+1?(i(),n("span",D,"âœ“")):(i(),n("span",I,d(c+1),1))]),e("span",j,d(o),1)],2))),128))]),e("div",F,[r[23]||(r[23]=e("h2",{class:"form-title"},"Create Your Account",-1)),e("p",O,"Step "+d(s.currentStep)+" of "+d(s.steps.length)+": "+d(s.steps[s.currentStep-1]),1)]),s.errorMessage?(i(),n("div",U,[r[24]||(r[24]=e("svg",{class:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Y,d(s.errorMessage),1)])):u("",!0),s.showSuccess?(i(),n("div",T,[r[26]||(r[26]=e("div",{class:"success-icon-wrapper"},[e("svg",{class:"success-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),r[27]||(r[27]=e("h3",{class:"success-title"},"Account Created!",-1)),e("p",H,[r[25]||(r[25]=f(" We've sent a verification email to ",-1)),e("strong",null,d(s.form.email),1)]),r[28]||(r[28]=e("p",{class:"success-submessage"}," Please check your inbox and click the verification link to activate your account. ",-1)),e("button",{onClick:r[0]||(r[0]=(...o)=>l.goToLogin&&l.goToLogin(...o)),class:"login-btn"}," Go to Login ")])):(i(),n("form",{key:2,onSubmit:r[22]||(r[22]=L((...o)=>l.handleNext&&l.handleNext(...o),["prevent"])),class:"signup-form"},[p(e("div",G,[e("div",W,[r[29]||(r[29]=e("label",{for:"firstName",class:"form-label"},[f("First Name "),e("span",{class:"required"},"*")],-1)),p(e("input",{id:"firstName","onUpdate:modelValue":r[1]||(r[1]=o=>s.form.first_name=o),type:"text",placeholder:"Enter your first name",class:m(["form-input",{"input-error":s.errors.first_name}]),required:"",onInput:r[2]||(r[2]=o=>l.clearError("first_name"))},null,34),[[h,s.form.first_name]]),s.errors.first_name?(i(),n("p",J,d(s.errors.first_name),1)):u("",!0)]),e("div",K,[r[30]||(r[30]=e("label",{for:"lastName",class:"form-label"},[f("Last Name "),e("span",{class:"required"},"*")],-1)),p(e("input",{id:"lastName","onUpdate:modelValue":r[3]||(r[3]=o=>s.form.last_name=o),type:"text",placeholder:"Enter your last name",class:m(["form-input",{"input-error":s.errors.last_name}]),required:"",onInput:r[4]||(r[4]=o=>l.clearError("last_name"))},null,34),[[h,s.form.last_name]]),s.errors.last_name?(i(),n("p",Q,d(s.errors.last_name),1)):u("",!0)]),e("div",R,[r[31]||(r[31]=e("label",{for:"email",class:"form-label"},[f("Email Address "),e("span",{class:"required"},"*")],-1)),p(e("input",{id:"email","onUpdate:modelValue":r[5]||(r[5]=o=>s.form.email=o),type:"email",placeholder:"you@example.com",class:m(["form-input",{"input-error":s.errors.email}]),required:"",onInput:r[6]||(r[6]=o=>l.clearError("email"))},null,34),[[h,s.form.email]]),s.errors.email?(i(),n("p",X,d(s.errors.email),1)):u("",!0)])],512),[[g,s.currentStep===1]]),p(e("div",Z,[e("div",$,[r[33]||(r[33]=e("label",{for:"gender",class:"form-label"},[f("Gender "),e("span",{class:"required"},"*")],-1)),p(e("select",{id:"gender","onUpdate:modelValue":r[7]||(r[7]=o=>s.form.gender=o),class:m(["form-select",{"input-error":s.errors.gender}]),required:s.currentStep===2,onChange:r[8]||(r[8]=o=>l.clearError("gender"))},[...r[32]||(r[32]=[e("option",{value:"",disabled:""},"Select your gender",-1),e("option",{value:"M"},"Male",-1),e("option",{value:"F"},"Female",-1),e("option",{value:"O"},"Other",-1)])],42,rr),[[y,s.form.gender]]),s.errors.gender?(i(),n("p",er,d(s.errors.gender),1)):u("",!0)]),e("div",sr,[r[34]||(r[34]=e("label",{for:"dateOfBirth",class:"form-label"},[f("Date of Birth "),e("span",{class:"required"},"*")],-1)),p(e("input",{id:"dateOfBirth","onUpdate:modelValue":r[9]||(r[9]=o=>s.form.date_of_birth=o),type:"date",class:m(["form-input",{"input-error":s.errors.date_of_birth}]),max:l.maxDate,required:s.currentStep===2,onInput:r[10]||(r[10]=o=>l.clearError("date_of_birth"))},null,42,or),[[h,s.form.date_of_birth]]),s.errors.date_of_birth?(i(),n("p",tr,d(s.errors.date_of_birth),1)):u("",!0)]),e("div",ir,[r[36]||(r[36]=e("label",{for:"category",class:"form-label"},"Category",-1)),p(e("select",{id:"category","onUpdate:modelValue":r[11]||(r[11]=o=>s.form.category=o),class:"form-select",onChange:r[12]||(r[12]=o=>l.clearError("category"))},[...r[35]||(r[35]=[e("option",{value:""},"Select category (Optional)",-1),e("option",{value:"Individual"},"Individual",-1),e("option",{value:"Organization"},"Organization",-1),e("option",{value:"Government"},"Government",-1),e("option",{value:"Private Sector"},"Private Sector",-1),e("option",{value:"Student"},"Student",-1)])],544),[[y,s.form.category]]),s.errors.category?(i(),n("p",nr,d(s.errors.category),1)):u("",!0)]),e("div",lr,[r[37]||(r[37]=e("label",{for:"organisation",class:"form-label"},"Organization",-1)),p(e("input",{id:"organisation","onUpdate:modelValue":r[13]||(r[13]=o=>s.form.organisation=o),type:"text",placeholder:"Your organization (Optional)",class:m(["form-input",{"input-error":s.errors.organisation}]),onInput:r[14]||(r[14]=o=>l.clearError("organisation"))},null,34),[[h,s.form.organisation]]),s.errors.organisation?(i(),n("p",ar,d(s.errors.organisation),1)):u("",!0)])],512),[[g,s.currentStep===2]]),p(e("div",dr,[e("div",ur,[r[43]||(r[43]=e("label",{for:"password",class:"form-label"},[f("Password "),e("span",{class:"required"},"*")],-1)),e("div",mr,[p(e("input",{id:"password","onUpdate:modelValue":r[15]||(r[15]=o=>s.form.password=o),type:s.showPassword?"text":"password",placeholder:"Create a strong password",class:m(["form-input pr-12",{"input-error":s.errors.password}]),required:s.currentStep===3,onInput:r[16]||(r[16]=o=>l.clearError("password"))},null,42,pr),[[k,s.form.password]]),e("button",{type:"button",onClick:r[17]||(r[17]=o=>s.showPassword=!s.showPassword),class:"password-toggle"},[s.showPassword?(i(),n("svg",fr,[...r[38]||(r[38]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(i(),n("svg",cr,[...r[39]||(r[39]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),s.errors.password?(i(),n("p",hr,d(s.errors.password),1)):u("",!0),e("div",gr,[r[42]||(r[42]=e("p",{class:"requirements-title"},"Password must contain:",-1)),e("div",{class:m(["requirement-item",{met:l.passwordHasMinLength}])},[...r[40]||(r[40]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),e("span",null,"At least 8 characters",-1)])],2),e("div",{class:m(["requirement-item",{met:l.passwordHasNumber}])},[...r[41]||(r[41]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),e("span",null,"At least one number",-1)])],2)])]),e("div",wr,[r[46]||(r[46]=e("label",{for:"confirmPassword",class:"form-label"},[f("Confirm Password "),e("span",{class:"required"},"*")],-1)),e("div",vr,[p(e("input",{id:"confirmPassword","onUpdate:modelValue":r[18]||(r[18]=o=>s.form.confirmPassword=o),type:s.showConfirmPassword?"text":"password",placeholder:"Confirm your password",class:m(["form-input pr-12",{"input-error":s.errors.confirmPassword}]),required:s.currentStep===3,onInput:r[19]||(r[19]=o=>l.clearError("confirmPassword"))},null,42,yr),[[k,s.form.confirmPassword]]),e("button",{type:"button",onClick:r[20]||(r[20]=o=>s.showConfirmPassword=!s.showConfirmPassword),class:"password-toggle"},[s.showConfirmPassword?(i(),n("svg",kr,[...r[44]||(r[44]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(i(),n("svg",_r,[...r[45]||(r[45]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])]),s.errors.confirmPassword?(i(),n("p",br,d(s.errors.confirmPassword),1)):u("",!0)])],512),[[g,s.currentStep===3]]),e("div",Sr,[s.currentStep>1?(i(),n("button",{key:0,type:"button",onClick:r[21]||(r[21]=(...o)=>l.handlePrevious&&l.handlePrevious(...o)),class:"nav-btn secondary",disabled:s.isLoading}," Previous ",8,Pr)):u("",!0),e("button",{type:"submit",class:m(["nav-btn primary",{"btn-loading":s.isLoading}]),disabled:s.isLoading||!l.isCurrentStepValid},[s.isLoading?(i(),n("span",xr,[...r[47]||(r[47]=[e("svg",{class:"spinner",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Creating...",-1)])])):(i(),n("span",Mr,d(s.currentStep===s.steps.length?"Create Account":"Next"),1))],10,Cr)])],32)),s.showSuccess?u("",!0):(i(),n("div",qr,[e("p",Ar,[r[49]||(r[49]=f(" Already have an account? ",-1)),V(b,{to:"/login",class:"login-link"},{default:w(()=>[...r[48]||(r[48]=[f("Login",-1)])]),_:1})])]))])]),_:1})}const zr=M(N,[["render",Lr],["__scopeId","data-v-c94ba228"]]);export{zr as default};
