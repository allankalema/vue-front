import{A as v}from"./AuthLayout-C-mLveiX.js";import{a as b,s as M}from"./authService-Aa4usrHm.js";import{_ as y,s as x,w as m,g as h,o as i,b as e,c as l,d,t as u,e as _,x as p,n as c,y as L,A as C,a as w,B as P,C as g}from"./index-CDqjSkk1.js";import"./Nita-logo-CbE_mBG5.js";const V={name:"LoginView",components:{AuthLayout:v},data(){return{form:{email:"",password:"",rememberMe:!1},showPassword:!1,isLoading:!1,errorMessage:"",successMessage:"",errors:{email:"",password:""}}},computed:{isFormValid(){return this.form.email&&this.form.password&&!this.errors.email&&!this.errors.password}},methods:{togglePassword(){this.showPassword=!this.showPassword},clearError(o){this.errors[o]&&(this.errors[o]=""),this.errorMessage&&(this.errorMessage="")},validateForm(){let o=!0;return this.form.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.form.email)||(this.errors.email="Please enter a valid email address",o=!1):(this.errors.email="Email is required",o=!1),this.form.password?this.form.password.length<6&&(this.errors.password="Password must be at least 6 characters",o=!1):(this.errors.password="Password is required",o=!1),o},async handleLogin(){if(this.errorMessage="",this.successMessage="",this.errors={email:"",password:""},!!this.validateForm()){this.isLoading=!0;try{const o=await b(this.form.email,this.form.password);M(o),this.successMessage="Login successful! Redirecting...",window.dispatchEvent(new CustomEvent("user-logged-in")),setTimeout(()=>{this.$router.push("/")},1e3)}catch(o){if(console.error("Login error:",o),o.response){const s=o.response.status,a=o.response.data;s===401?this.errorMessage="Invalid email or password. Please try again.":s===400?this.errorMessage=a.detail||a.message||"Invalid login credentials":s===429?this.errorMessage="Too many login attempts. Please try again later.":s>=500?this.errorMessage="Server error. Please try again later.":this.errorMessage=a.detail||a.message||"An error occurred during login"}else o.request?this.errorMessage="Network error. Please check your internet connection.":this.errorMessage="An unexpected error occurred. Please try again."}finally{this.isLoading=!1}}}}},B={class:"login-form"},A={key:0,class:"error-alert"},z={class:"error-text"},E={key:1,class:"success-alert"},j={class:"success-text"},I={class:"form-group"},S={class:"input-wrapper"},q=["disabled"],D={key:0,class:"field-error"},F={class:"form-group"},N={class:"input-wrapper"},T=["type","disabled"],U=["disabled"],H={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},R={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:0,class:"field-error"},G={class:"form-options"},J={class:"checkbox-label"},K=["disabled"],O=["disabled"],Q={key:0,class:"btn-text"},X={key:1,class:"btn-loading-content"},Y={class:"form-footer"},Z={class:"footer-text"};function $(o,s,a,ss,r,n){const f=h("router-link"),k=h("AuthLayout");return i(),x(k,null,{default:m(()=>[e("div",B,[s[20]||(s[20]=e("div",{class:"form-header"},[e("h2",{class:"form-title"},"Welcome Back")],-1)),r.errorMessage?(i(),l("div",A,[s[7]||(s[7]=e("svg",{class:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",z,u(r.errorMessage),1)])):d("",!0),r.successMessage?(i(),l("div",E,[s[8]||(s[8]=e("svg",{class:"success-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",j,u(r.successMessage),1)])):d("",!0),e("form",{onSubmit:s[6]||(s[6]=_((...t)=>n.handleLogin&&n.handleLogin(...t),["prevent"])),class:"auth-form"},[e("div",I,[s[10]||(s[10]=e("label",{for:"email",class:"form-label"},"Email Address",-1)),e("div",S,[s[9]||(s[9]=e("svg",{class:"input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})],-1)),p(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=t=>r.form.email=t),type:"email",placeholder:"you@example.com",class:c(["form-input",{"input-error":r.errors.email}]),disabled:r.isLoading,required:"",onInput:s[1]||(s[1]=t=>n.clearError("email"))},null,42,q),[[L,r.form.email]])]),r.errors.email?(i(),l("p",D,u(r.errors.email),1)):d("",!0)]),e("div",F,[s[14]||(s[14]=e("label",{for:"password",class:"form-label"},"Password",-1)),e("div",N,[s[13]||(s[13]=e("svg",{class:"input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),p(e("input",{id:"password","onUpdate:modelValue":s[2]||(s[2]=t=>r.form.password=t),type:r.showPassword?"text":"password",placeholder:"Enter your password",class:c(["form-input pr-12",{"input-error":r.errors.password}]),disabled:r.isLoading,required:"",onInput:s[3]||(s[3]=t=>n.clearError("password"))},null,42,T),[[C,r.form.password]]),e("button",{type:"button",onClick:s[4]||(s[4]=(...t)=>n.togglePassword&&n.togglePassword(...t)),class:"password-toggle",disabled:r.isLoading},[r.showPassword?(i(),l("svg",H,[...s[11]||(s[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(i(),l("svg",R,[...s[12]||(s[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,U)]),r.errors.password?(i(),l("p",W,u(r.errors.password),1)):d("",!0)]),e("div",G,[e("label",J,[p(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>r.form.rememberMe=t),type:"checkbox",class:"checkbox-input",disabled:r.isLoading},null,8,K),[[P,r.form.rememberMe]]),s[15]||(s[15]=e("span",{class:"checkbox-text"},"Remember me",-1))]),w(f,{to:"/forgot-password",class:"forgot-link"},{default:m(()=>[...s[16]||(s[16]=[g(" Forgot password? ",-1)])]),_:1})]),e("button",{type:"submit",class:c(["submit-btn",{"btn-loading":r.isLoading}]),disabled:r.isLoading||!n.isFormValid},[r.isLoading?(i(),l("span",X,[...s[17]||(s[17]=[e("svg",{class:"spinner",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Signing in...",-1)])])):(i(),l("span",Q,"Sign In"))],10,O)],32),e("div",Y,[e("p",Z,[s[19]||(s[19]=g(" Don't have an account? ",-1)),w(f,{to:"/signup",class:"signup-link"},{default:m(()=>[...s[18]||(s[18]=[g("Sign up",-1)])]),_:1})])])])]),_:1})}const is=y(V,[["render",$],["__scopeId","data-v-286adf83"]]);export{is as default};
