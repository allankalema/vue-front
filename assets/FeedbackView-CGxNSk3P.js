import{A as v}from"./AuthLayout-By1UG4EG.js";import{U as k}from"./feedbackService-BsGaQpLH.js";import{_ as y,s as w,w as M,g as F,o as a,b as s,c as n,e as f,d as u,t as m,C as d,x as p,n as c,y as h,E as j}from"./index-CK8lU9Rg.js";import"./Nita-logo-CbE_mBG5.js";const x={name:"FeedbackView",components:{AuthLayout:v},data(){return{form:{email:"",category:"",subject:"",message:"",attachment:null},errors:{email:"",category:"",subject:"",message:"",attachment:""},isLoading:!1,errorMessage:"",showSuccess:!1,isDragging:!1,MAX_FILE_SIZE:5*1024*1024}},computed:{isFormValid(){return this.form.category&&this.form.subject.trim()&&this.form.message.trim()&&!this.errors.email&&!this.errors.category&&!this.errors.subject&&!this.errors.message&&!this.errors.attachment}},methods:{clearError(t){this.errors[t]&&(this.errors[t]=""),this.errorMessage&&(this.errorMessage="")},validateForm(){let t=!0;return this.errors={email:"",category:"",subject:"",message:"",attachment:""},this.form.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.form.email)&&(this.errors.email="Please enter a valid email address",t=!1),this.form.category||(this.errors.category="Please select a category",t=!1),this.form.subject.trim()?this.form.subject.length<5&&(this.errors.subject="Subject must be at least 5 characters",t=!1):(this.errors.subject="Subject is required",t=!1),this.form.message.trim()?this.form.message.length<20&&(this.errors.message="Please provide more details (at least 20 characters)",t=!1):(this.errors.message="Message is required",t=!1),this.form.attachment&&this.form.attachment.size>this.MAX_FILE_SIZE&&(this.errors.attachment="File size must be less than 5MB",t=!1),t},triggerFileInput(){this.isLoading||this.$refs.fileInput.click()},handleFileSelect(t){const e=t.target.files[0];e&&this.validateAndSetFile(e)},handleFileDrop(t){this.isDragging=!1;const e=t.dataTransfer.files[0];e&&this.validateAndSetFile(e)},validateAndSetFile(t){if(this.errors.attachment="",t.size>this.MAX_FILE_SIZE){this.errors.attachment="File size must be less than 5MB";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","image/png","image/jpeg","image/jpg"].includes(t.type)){this.errors.attachment="Invalid file type. Please upload PDF, DOC, TXT, or Image";return}this.form.attachment=t},removeFile(){this.form.attachment=null,this.errors.attachment="",this.$refs.fileInput&&(this.$refs.fileInput.value="")},formatFileSize(t){if(t===0)return"0 Bytes";const e=1024,o=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,g)).toFixed(2))+" "+o[g]},async handleSubmit(){if(this.errorMessage="",!!this.validateForm()){this.isLoading=!0;try{const t={subject:this.form.subject.trim(),category:this.form.category,message:this.form.message.trim(),email:this.form.email.trim()||null,attachment:this.form.attachment};await k.submitFeedback(t),this.showSuccess=!0}catch(t){if(console.error("Feedback submission error:",t),t.response){const e=t.response.status,o=t.response.data;e===400?(o.email&&(this.errors.email=Array.isArray(o.email)?o.email[0]:o.email),o.subject&&(this.errors.subject=Array.isArray(o.subject)?o.subject[0]:o.subject),o.category&&(this.errors.category=Array.isArray(o.category)?o.category[0]:o.category),o.message&&(this.errors.message=Array.isArray(o.message)?o.message[0]:o.message),o.attachment&&(this.errors.attachment=Array.isArray(o.attachment)?o.attachment[0]:o.attachment),this.errorMessage=o.detail||o.message||"Please check the form for errors"):e===413?this.errorMessage="File is too large. Maximum size is 5MB.":e>=500?this.errorMessage="Server error. Please try again later.":this.errorMessage=o.detail||o.message||"Failed to submit feedback"}else t.request?this.errorMessage="Network error. Please check your internet connection.":this.errorMessage="An unexpected error occurred. Please try again."}finally{this.isLoading=!1}}},resetForm(){this.form={email:"",category:"",subject:"",message:"",attachment:null},this.errors={email:"",category:"",subject:"",message:"",attachment:""},this.errorMessage="",this.showSuccess=!1,this.isDragging=!1,this.$refs.fileInput&&(this.$refs.fileInput.value="")}}},S={class:"feedback-form"},A={key:0,class:"success-card"},C={key:0,class:"error-alert"},B={class:"error-text"},I={class:"form-group"},z={class:"input-wrapper"},L=["disabled"],D={key:0,class:"field-error"},V={class:"form-group"},_={class:"input-wrapper"},E=["disabled"],P={key:0,class:"field-error"},T={class:"form-group"},q={class:"input-wrapper"},U=["disabled"],N={key:0,class:"field-error"},O={class:"field-hint"},X={class:"form-group"},H={class:"textarea-wrapper"},R=["disabled"],Z={key:0,class:"field-error"},W={class:"field-hint"},G={class:"form-group"},K=["disabled"],Y={key:0,class:"upload-prompt"},J={key:1,class:"file-selected-info"},Q={class:"file-details"},$={class:"file-name"},ee={class:"file-size"},se=["disabled"],re={key:0,class:"field-error"},te=["disabled"],oe={key:0,class:"btn-text"},ie={key:1,class:"btn-loading-content"};function le(t,e,o,g,r,l){const b=F("AuthLayout");return a(),w(b,null,{default:M(()=>[s("div",S,[e[36]||(e[36]=s("div",{class:"form-header"},[s("h2",{class:"form-title"},"Send Feedback"),s("p",{class:"form-subtitle"},"Help us improve NITA-U AI Compliance Portal")],-1)),r.showSuccess?(a(),n("div",A,[e[16]||(e[16]=s("div",{class:"success-icon-wrapper"},[s("svg",{class:"success-check",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e[17]||(e[17]=s("h3",{class:"success-title"},"Feedback Submitted!",-1)),e[18]||(e[18]=s("p",{class:"success-message"},"Thank you for helping us improve. We'll review your feedback shortly.",-1)),s("button",{onClick:e[0]||(e[0]=(...i)=>l.resetForm&&l.resetForm(...i)),class:"new-feedback-btn"}," Submit Another Feedback ")])):(a(),n("form",{key:1,onSubmit:e[15]||(e[15]=f((...i)=>l.handleSubmit&&l.handleSubmit(...i),["prevent"])),class:"auth-form"},[r.errorMessage?(a(),n("div",C,[e[19]||(e[19]=s("svg",{class:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("p",B,m(r.errorMessage),1)])):u("",!0),s("div",I,[e[21]||(e[21]=s("label",{for:"email",class:"form-label"},[d(" Email Address "),s("span",{class:"optional-tag"},"(Optional)")],-1)),s("div",z,[e[20]||(e[20]=s("svg",{class:"input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})],-1)),p(s("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=i=>r.form.email=i),type:"email",placeholder:"your.email@example.com",class:c(["form-input",{"input-error":r.errors.email}]),disabled:r.isLoading,onInput:e[2]||(e[2]=i=>l.clearError("email"))},null,42,L),[[h,r.form.email]])]),r.errors.email?(a(),n("p",D,m(r.errors.email),1)):u("",!0),e[22]||(e[22]=s("p",{class:"field-hint"},"We'll use this to follow up if needed",-1))]),s("div",V,[e[25]||(e[25]=s("label",{for:"category",class:"form-label"},[d(" Category "),s("span",{class:"required-star"},"*")],-1)),s("div",_,[e[24]||(e[24]=s("svg",{class:"input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),p(s("select",{id:"category","onUpdate:modelValue":e[3]||(e[3]=i=>r.form.category=i),class:c(["form-select",{"input-error":r.errors.category}]),disabled:r.isLoading,required:"",onChange:e[4]||(e[4]=i=>l.clearError("category"))},[...e[23]||(e[23]=[s("option",{value:"",disabled:""},"Select a category",-1),s("option",{value:"bug_report"},"Bug Report",-1),s("option",{value:"feature_request"},"Feature Request",-1),s("option",{value:"abuse"},"Report Abuse",-1),s("option",{value:"other"},"Other",-1)])],42,E),[[j,r.form.category]])]),r.errors.category?(a(),n("p",P,m(r.errors.category),1)):u("",!0)]),s("div",T,[e[27]||(e[27]=s("label",{for:"subject",class:"form-label"},[d(" Subject "),s("span",{class:"required-star"},"*")],-1)),s("div",q,[e[26]||(e[26]=s("svg",{class:"input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)),p(s("input",{id:"subject","onUpdate:modelValue":e[5]||(e[5]=i=>r.form.subject=i),type:"text",placeholder:"Brief description of your feedback",class:c(["form-input",{"input-error":r.errors.subject}]),disabled:r.isLoading,maxlength:"255",required:"",onInput:e[6]||(e[6]=i=>l.clearError("subject"))},null,42,U),[[h,r.form.subject]])]),r.errors.subject?(a(),n("p",N,m(r.errors.subject),1)):u("",!0),s("p",O,m(r.form.subject.length)+"/255 characters",1)]),s("div",X,[e[28]||(e[28]=s("label",{for:"message",class:"form-label"},[d(" Message "),s("span",{class:"required-star"},"*")],-1)),s("div",H,[p(s("textarea",{id:"message","onUpdate:modelValue":e[7]||(e[7]=i=>r.form.message=i),placeholder:"Please provide detailed information about your feedback...",class:c(["form-textarea",{"input-error":r.errors.message}]),disabled:r.isLoading,rows:"6",required:"",onInput:e[8]||(e[8]=i=>l.clearError("message"))},null,42,R),[[h,r.form.message]])]),r.errors.message?(a(),n("p",Z,m(r.errors.message),1)):u("",!0),s("p",W,m(r.form.message.length)+" characters",1)]),s("div",G,[e[32]||(e[32]=s("label",{class:"form-label"},[d(" Attachment "),s("span",{class:"optional-tag"},"(Optional)")],-1)),s("div",{class:c(["file-upload-area",{"file-dragging":r.isDragging,"file-selected":r.form.attachment,"input-error":r.errors.attachment}]),onClick:e[11]||(e[11]=(...i)=>l.triggerFileInput&&l.triggerFileInput(...i)),onDragover:e[12]||(e[12]=f(i=>r.isDragging=!0,["prevent"])),onDragleave:e[13]||(e[13]=f(i=>r.isDragging=!1,["prevent"])),onDrop:e[14]||(e[14]=f((...i)=>l.handleFileDrop&&l.handleFileDrop(...i),["prevent"]))},[s("input",{ref:"fileInput",type:"file",class:"hidden-file-input",accept:".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg",disabled:r.isLoading,onChange:e[9]||(e[9]=(...i)=>l.handleFileSelect&&l.handleFileSelect(...i))},null,40,K),r.form.attachment?(a(),n("div",J,[e[31]||(e[31]=s("svg",{class:"file-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),s("div",Q,[s("p",$,m(r.form.attachment.name),1),s("p",ee,m(l.formatFileSize(r.form.attachment.size)),1)]),s("button",{type:"button",onClick:e[10]||(e[10]=f((...i)=>l.removeFile&&l.removeFile(...i),["stop"])),class:"remove-file-btn",disabled:r.isLoading},[...e[30]||(e[30]=[s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,se)])):(a(),n("div",Y,[...e[29]||(e[29]=[s("svg",{class:"upload-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),s("p",{class:"upload-text"},[s("span",{class:"upload-primary"},"Click to upload"),s("span",{class:"upload-secondary"},"or drag and drop")],-1),s("p",{class:"upload-hint"},"PDF, DOC, TXT, or Image (Max 5MB)",-1)])]))],34),r.errors.attachment?(a(),n("p",re,m(r.errors.attachment),1)):u("",!0)]),s("button",{type:"submit",class:c(["submit-btn",{"btn-loading":r.isLoading}]),disabled:r.isLoading||!l.isFormValid},[r.isLoading?(a(),n("span",ie,[...e[34]||(e[34]=[s("svg",{class:"spinner",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),s("span",null,"Submitting...",-1)])])):(a(),n("span",oe,[...e[33]||(e[33]=[s("svg",{class:"btn-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1),d(" Submit Feedback ",-1)])]))],10,te),e[35]||(e[35]=s("div",{class:"help-section"},[s("p",{class:"help-text"},[s("svg",{class:"help-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),d(" Your feedback helps us improve the NITA-U Compliance Portal for everyone ")])],-1))],32))])]),_:1})}const ue=y(x,[["render",le],["__scopeId","data-v-b3eb0f55"]]);export{ue as default};
